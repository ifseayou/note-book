# 流批一体设计

确保数据最终能在所有正确的地方表现出正确的形式，是批处理和流处理的共同目标，通常流处理处理增量数据确保数据的及时性，而批处理输入全量历史数据保证数据准确性，即`Lambda`架构

<center>Lambda架构图</center>

我们的目前的整个大数据架构也是该架构，主要有：

:one: 离线计算

:two: 准实时

:three: 实时

<center>抽象Lambda技术架构图</center>

`Lambda`架构有一定的问题，如下

* 在批处理和流处理框架中维护相同的逻辑是很显著的额外工作
* 由于流管道和批处理管道产生独立的输出，因此需要合并它们以响应用户请求
* 尽管有能力重新处理整个历史数据集是很好的，但在大型数据集上这样做经常会开销巨大。因此，批处理流水线通常需要设置为处理增量批处理（比如）

`Lambda`架构，它能够有效地支撑离线和实时的数据开发需求，但它流和批两条数据链路割裂所导致的高开发维护成本以及数据口径不一致是无法忽视的缺陷

我们希望统，通过一套数据链路来同时满足流和批的数据处理需求，即统一批处理和流处理~流批一体~



，一个流批一体的设计应该具备下列能力：

:one: 通过处理最近事件流的相同处理引擎来重放历史事件的能力

:two: 对于流处理器来说，恰好一次语义，即幂等性

:three: 按事件时间进行窗口化的工具，而不是按处理时间进行窗口化





原始数据经过数据系统的消费，转换，连接，过滤，聚合，训练模型，评估，最终产出数据集，整个链路的过程



京东认为：流批一体还存在一些中间阶段，比如只实现计算的统一或者只实现存储的统一也是有重大意义的。比如计算的统一可以解决口径不一致的问题



批处理和流处理有许多共同的原则，主要的根本区别在于流处理器在无界数据集上运行，而批处理处理有界数据集,







[^1]: DDIA:https://vonng.gitbooks.io/ddia-cn/content/ch12.html
[^2]:京东在流批一体的实践: https://flink-learning.org.cn/article/detail/8df2805f2ffe7f5d7d5f07e9b4621c2e?name=author&tab=ea6f32fb7538b79f7aee574e7be60826&page=xiangguanwenzhang
